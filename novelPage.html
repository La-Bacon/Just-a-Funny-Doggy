<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>untitle</title>
    <style>
        #novel-content {
            white-space: pre-wrap; /* 改行を維持 */
            font-family: monospace; /* ターミナル風のフォント */
        }
        #page-number {
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div id="novel-content"></div>
    <button id="prev-page">前のページ</button>
    <span id="page-number"></span>
    <button id="next-page">次のページ</button>

    <script>
        let currentPage = 0;
        let pages = [];
        let pageNumbers = [];

        // テキストファイルを読み込む
        fetch('./Text/novel.txt')
            .then(response => response.text())
            .then(data => {
                // 「＝ページ番号＝」でページを分割
                const regex = /=\d+=/g;
                let splitData = data.split(regex); // テキスト部分を取得
                let matches = data.match(regex); // ページ番号部分を取得

                // ページ内容と番号をそれぞれ格納
                splitData.forEach((content, index) => {
                    if (matches && matches[index]) {
                        let pageNumber = matches[index].replace(/=/g, ''); // 数字部分だけ取得
                        pages.push(content.trim());
                        pageNumbers.push(pageNumber);
                    }
                });

                // 最初のページを表示
                showPage(currentPage);
            });

        // ページを表示する関数
        function showPage(page) {
            // テキスト内容を表示
            document.getElementById('novel-content').innerHTML = pages[page];

            // ページ番号を表示
            document.getElementById('page-number').textContent = `＝${pageNumbers[page]}＝`;
        }

        // 次のページ
        document.getElementById('next-page').addEventListener('click', function() {
            if (currentPage < pages.length - 1) {
                currentPage++;
                showPage(currentPage);
            }
        });

        // 前のページ
        document.getElementById('prev-page').addEventListener('click', function() {
            if (currentPage > 0) {
                currentPage--;
                showPage(currentPage);
            }
        });
    </script>

</body>
</html>
